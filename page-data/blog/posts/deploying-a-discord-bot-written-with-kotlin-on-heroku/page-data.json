{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/posts/deploying-a-discord-bot-written-with-kotlin-on-heroku","result":{"data":{"markdownRemark":{"html":"<p>Over my time in TPH, I have noticed that a common woe aspiring bot developers have is that they are unable to host\ntheir Discord bot online as they may not have access to a credit card.</p>\n<h2 id=\"introducing-heroku\" style=\"position:relative;\"><a href=\"#introducing-heroku\" aria-label=\"introducing heroku permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Introducing Heroku!</h2>\n<p>While the official Discord bots used in TPH - like HotBot - is hosted via paid platforms, there are free alternatives\nto deploying your bot online. This is where Heroku comes into the picture!</p>\n<blockquote>\n<p>Heroku is a cloud platform that lets companies build, deliver, monitor and scale apps â€” we're the fastest way to\ngo from idea to URL, bypassing all those infrastructure headaches.</p>\n</blockquote>\n<p>Heroku's free tier does not require any credit card information and has sufficient uptime for your basic bot\ndevelopment needs and it is a great starting place to understand hosting.</p>\n<h2 id=\"how-does-heroku-work\" style=\"position:relative;\"><a href=\"#how-does-heroku-work\" aria-label=\"how does heroku work permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How does Heroku work?</h2>\n<p>Before diving into setting up a Discord bot on Heroku, it is best to explain how Heroku is used. Heroku relies on the\nGit version control system (VCS) to manage an application. This means that it integrates well with any existing projects\nthat already use Git. Do not fret, even if your application does not use Git, the configuration and setup for Heroku is\nstill simple.</p>\n<p>By using Git, Heroku receives the project files directly and it is responsible for building the project. This is unlike\nother hosting platforms where you would often only supply the final executable - a <code class=\"language-text\">.jar</code> file in our case - to the\nhosting platform to run.</p>\n<p>In order for Heroku to understand how it will build and deploy your application, you must provide a <code class=\"language-text\">Procfile</code>.</p>\n<p>The <code class=\"language-text\">Procfile</code> is comprised of two key components - the dyno to run the application on and the commands to run your\napplication.</p>\n<p>According to the <a href=\"https://www.heroku.com/dynos\">Heroku documentation on dynos</a>, dynos are containers that are used to\nrun and scale all Heroku applications. Rather than worrying about configuring your build environment or OS, you can\nfocus on building your applications and allowing Heroku to take over the build and deployment process. For all\nDiscord bots, we will use a <strong>worker</strong> dyno.</p>\n<p>The build commands we supply correspond to the build commands we use to run our bots locally.</p>\n<p>As Heroku uses the project files to determine the type of tools we are using, we do not need to specify the\ninstructions to create the executable. In our case, since we are using Maven, it can intelligently detect the\n<code class=\"language-text\">pom.xml</code> file and create the <code class=\"language-text\">.jar</code> accordingly. This leaves us with only the run commands to include in our <code class=\"language-text\">Procfile</code>.</p>\n<p>Finally, to tighten security, we will store all bot tokens in Heroku's\n<a href=\"https://devcenter.heroku.com/articles/config-vars\">config vars.</a> From a code perspective, these config vars are simply\nenvironment variables available to our applications. This allows us to load our bot token during runtime and prevent\nthe bot token from being leaked.</p>\n<p>Thus, we can define our deployment plan as such:</p>\n<ol>\n<li>Initialise the codebase as a Git repository</li>\n<li>Create a Heroku application for the bot</li>\n<li>Create a <code class=\"language-text\">Procfile</code> to supply instructions for Heroku to run the bot</li>\n<li>Store the bot token as a config var to be used by your bot</li>\n</ol>\n<p>What I have just presented is a general overview of Heroku as a hosting platform. I will be diving into the implementation\nin the following sections.</p>\n<h2 id=\"getting-started\" style=\"position:relative;\"><a href=\"#getting-started\" aria-label=\"getting started permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Getting started</h2>\n<p>For this article, I will be using a very simple Discord bot written in Kotlin. I have chosen to use JDA as the focus of\nthis guide is to understand Heroku. The code repository can be found\n<a href=\"https://github.com/woojiahao/discord-heroku-deployment-demo\">here.</a></p>\n<p>If you wish to follow along, you can get the repository via</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> clone https://github.com/woojiahao/discord-heroku-deployment-demo ping-bot\n$ <span class=\"token builtin class-name\">cd</span> ping-bot/</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Aside from that, basic understanding of the following is good to have to understand the technical details of this guide.</p>\n<ol>\n<li><a href=\"https://git-scm.com/book/en/v2\">Git</a> - version control system that integrates with Heroku to enable easy deployments</li>\n<li><a href=\"http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html\">Maven</a> - build tool for Kotlin to</li>\n</ol>\n<p>manage application dependencies</p>\n<p>In Kotlin/Java, we are looking to create a <code class=\"language-text\">.jar</code> file. This <code class=\"language-text\">.jar</code> file can be thought of like a <code class=\"language-text\">.exe</code> file.\nEssentially, it bundles the application and allows us to run our bot without having to fire up an IDE.</p>\n<p>To create this <code class=\"language-text\">.jar</code> file, we will use Maven. For more information about using Maven to create <code class=\"language-text\">.jar</code> files, refer to\n<a href=\"http://tutorials.jenkov.com/maven/maven-build-fat-jar.html\">this</a> guide.</p>\n<p>With the formalities out of the way, let's get down to deploying our bot.</p>\n<h2 id=\"installing-heroku\" style=\"position:relative;\"><a href=\"#installing-heroku\" aria-label=\"installing heroku permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Installing Heroku</h2>\n<p>You will have to install Heroku onto your machine to execute the following commands in the command line. You can find\nthe installation instructions for Heroku <a href=\"https://devcenter.heroku.com/articles/heroku-cli\">here</a>.</p>\n<p>To ensure that you have installed Heroku successfully, run <code class=\"language-text\">heroku --version</code>. My version of Heroku is\n<code class=\"language-text\">heroku/7.39.2 linux-x64 node-v13.12.0</code></p>\n<h2 id=\"setup-a-git-repository\" style=\"position:relative;\"><a href=\"#setup-a-git-repository\" aria-label=\"setup a git repository permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup a Git repository</h2>\n<p>As mentioned earlier, we need to ensure that our application is a Git repository for Heroku to work.</p>\n<p>While it is recommended to <a href=\"https://help.github.com/en/github/importing-your-projects-to-github/adding-an-existing-project-to-github-using-the-command-line\">publish your repository to GitHub</a> (or any other version control website), it is not necessary\nfor deploying your applicaiton to Heroku.</p>\n<p>If you are using the sample bot, it is already a Git repository.</p>\n<p>If you are deploying your own bot, initialise a repository by using the following command inside the root folder of your\ncodebase.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> init</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2 id=\"create-a-new-heroku-application\" style=\"position:relative;\"><a href=\"#create-a-new-heroku-application\" aria-label=\"create a new heroku application permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create a new Heroku application</h2>\n<p>Then, we want to create a Heroku application.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ heroku create <span class=\"token punctuation\">[</span>project name<span class=\"token punctuation\">]</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>The project name is optional and will be automatically generated if not provided. It is recommended that you give a name\nto be organised.</p>\n<p>To ensure that the Heroku application has been created, run the <code class=\"language-text\">git remote -v</code> command to list the remotes of your\nrepository. Should your application have been created successfully, you will see a new remote added linking to a Heroku\nGit remote.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 900px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8db80bcd5573534f473cfe8b237474f2/f3a19/git-remote.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.44444444444445%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAA8klEQVQY0y2OC47DIAxEc5p+IBBswOaXkJCQqve/0G6bSqOnN5ZG8hDTnJdi3cZ0eN+YDqLdQBEmS5yfyt2lvcuLl/z8Id0Aece82/yeQjOxQ+yaK6QmIAjtRmSFPF4BukRdR+DBcEZKo8kTVm2rxnmyVeEs/SptGZGkIWn8bwmf+hWWQENct7KsMZ/ebYiLtRVwNlC0WyZalYlCs5w+uQl7E/b+If7ezvUNvnLpofQw97CclPdUX6EcaTlTfXE5QulcjhHiaII0QUF8Kv8Y3UCpTbZQaqF0pGq5+th8ajZsllf3pY/Nxc1/A1RdbELT//gPnpVK4wi2OeEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Results of git remote -v\"\n        title=\"Results of git remote -v\"\n        src=\"/static/8db80bcd5573534f473cfe8b237474f2/1cfc2/git-remote.png\"\n        srcset=\"/static/8db80bcd5573534f473cfe8b237474f2/3684f/git-remote.png 225w,\n/static/8db80bcd5573534f473cfe8b237474f2/fc2a6/git-remote.png 450w,\n/static/8db80bcd5573534f473cfe8b237474f2/1cfc2/git-remote.png 900w,\n/static/8db80bcd5573534f473cfe8b237474f2/f3a19/git-remote.png 1086w\"\n        sizes=\"(max-width: 900px) 100vw, 900px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>With the Heroku application created, we can begin configuring our repository to deploy to Heroku.</p>\n<h2 id=\"creating-a-procfile\" style=\"position:relative;\"><a href=\"#creating-a-procfile\" aria-label=\"creating a procfile permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creating a Procfile</h2>\n<p>As explained earlier, the <code class=\"language-text\">Procfile</code> acts as a build instruction manual for our application. It instructs Heroku how we\nwant to run our application. Heroku takes over the rest and helps with managing our build environment.</p>\n<p>For my sample bot, the <code class=\"language-text\">Procfile</code> looks like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">worker: java -jar target/Bot.jar</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Let's breakdown this file. We first declare the dyno type as <code class=\"language-text\">worker</code>. Then, we specify the command to run our <code class=\"language-text\">.jar</code>\nfile.</p>\n<p>Heroku is able to intelligently detect that our Kotlin application uses Maven as a build tool and runs the\n<code class=\"language-text\">mvn clean install</code> command to create our <code class=\"language-text\">Bot.jar</code> file. Then, it will use the commands in the <code class=\"language-text\">Procfile</code> to run the\napplication.</p>\n<h2 id=\"securing-discord-bot-tokens\" style=\"position:relative;\"><a href=\"#securing-discord-bot-tokens\" aria-label=\"securing discord bot tokens permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Securing Discord bot tokens</h2>\n<p>A Discord bot requires a token to run.</p>\n<p>You can obtain this bot token when you make a new Discord bot from the Discord\n<a href=\"https://discordpy.readthedocs.io/en/latest/discord.html\">developer dashboard</a>.\nHowever, you do not want to expose this token in your repository as this would mean that others could launch and\naccess your bot.</p>\n<p>As mentioned earlier, we will make use of Heroku's <a href=\"https://devcenter.heroku.com/articles/config-vars\">config vars</a> to\nsafely store and access this token.</p>\n<p>We will add our bot's token as an environment variable and use <code class=\"language-text\">System.getenv()</code> method to retrieve this value.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ heroku config:set <span class=\"token assign-left variable\">BOT_TOKEN</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>bot token<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Inside the <code class=\"language-text\">Bot.kt</code> file, you will find the following lines in the <code class=\"language-text\">main()</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-kotlin line-numbers\"><code class=\"language-kotlin\"><span class=\"token keyword\">val</span> token <span class=\"token operator\">=</span> System<span class=\"token punctuation\">.</span><span class=\"token function\">getenv</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"BOT_TOKEN\"</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token operator\">?:</span> <span class=\"token keyword\">throw</span> <span class=\"token function\">Exception</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Must include bot token in environment variable for bot to run\"</span></span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>This will retrieve the corresponding environment variable that we have stored in Heroku. If there is no environment\nvariable present, we will stop the bot from launching and display an error.</p>\n<p>An additional benefit of storing our bot tokens as an environment variable is that we are able to store the bot token\nlocally as an environment variable which streamlines our development process as we could have a separate token used\nfor a development/testing bot.</p>\n<h2 id=\"launching-the-bot\" style=\"position:relative;\"><a href=\"#launching-the-bot\" aria-label=\"launching the bot permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Launching the bot</h2>\n<p>After configuring everything, commit all the changes to your project, and push it to the <code class=\"language-text\">heroku</code> remote.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span>\n$ <span class=\"token function\">git</span> commit -am <span class=\"token string\">\"Setup Heroku\"</span>\n$ <span class=\"token function\">git</span> push heroku master</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>If you encounter a problem with pushing to the <code class=\"language-text\">heroku</code> remote, use the command <code class=\"language-text\">heroku logs --tail</code> and find the\nlatest error messages to debug any errors.</p>\n<p>After pushing the changes, Heroku will build your application. However, it is not online yet as you have to scale\nyour application. This tells Heroku how many instances of your application you wish to run. For our case, we can go\nwith one worker dyno.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ heroku ps:scale <span class=\"token assign-left variable\">worker</span><span class=\"token operator\">=</span><span class=\"token number\">1</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>You can now invite your bot to a server and test it out. If you're using the sample PingBot, you can use <code class=\"language-text\">!ping</code> and\nexpect the bot to respond with <code class=\"language-text\">Pong!</code>.</p>\n<h2 id=\"now-what\" style=\"position:relative;\"><a href=\"#now-what\" aria-label=\"now what permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Now what?</h2>\n<p>Congratulations! You have just deployed a Discord bot onto Heroku! When you make changes to the bot, you are free to\ncommit and push those changes to the <code class=\"language-text\">heroku</code> remote to update the bot that is online.</p>\n<p>Here are some tips for developing with Heroku.</p>\n<ol>\n<li>While working on your development copy of the bot, it is recommended that you obtain a seprate bot token and\nattach it as an environment variable to your local development environment. Doing so allows you to maintain your\nbot's uptime while making changes.</li>\n<li>If you encounter any errors or your bot is not responding, use the <code class=\"language-text\">heroku logs --tail</code> command to view the logs\nof your application. Doing so allows you to check if there were any errors while running your project.</li>\n<li>If you require persistent storage, Heroku comes with a free tier plugin for\n<a href=\"https://www.heroku.com/postgres\">PostgreSQL.</a> Heroku - by default - has ephemeral storage, meaning it does not\nmaintain new files after each build.</li>\n</ol>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>Heroku offers a free alternative to many hosting platforms and is a perfect platform for aspiring bot developers to begin.</p>\n<p>More resources on hosting JVM-based applications on Heroku:</p>\n<ul>\n<li><a href=\"https://devcenter.heroku.com/articles/getting-started-with-java#introduction\">Getting Started on Heroku with Java</a></li>\n<li><a href=\"https://github.com/heroku/java-sample\">Java Sample (on GitHub)</a></li>\n</ul>","frontmatter":{"title":"Deploying discord bots written in Kotlin to Heroku","date":"21 April 2020","description":"A (revised) guide to deploying JVM-based Discord bots on Heroku","tags":["Kotlin","Heroku","Discord bot","deployment","tutorial","guide"]},"fields":{"slug":"/blog/posts/deploying-a-discord-bot-written-with-kotlin-on-heroku"}},"allMarkdownRemark":{"edges":[{"node":{"fields":{"slug":"/blog/posts/gatsby-js-github-actions-github-pages-match-made-in-heaven"},"frontmatter":{"title":"Gatsby.js + GitHub Actions + GitHub Pages = Match Made in Heaven?","published":true}}},{"node":{"fields":{"slug":"/blog/posts/the-truth-behind-software-projects"},"frontmatter":{"title":"The truth behind software projects","published":true}}}]}},"pageContext":{"slug":"/blog/posts/deploying-a-discord-bot-written-with-kotlin-on-heroku","next":"/blog/posts/the-truth-behind-software-projects","prev":"/blog/posts/gatsby-js-github-actions-github-pages-match-made-in-heaven"}},"staticQueryHashes":["2068778362","2207116114"]}