<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" property="og:image" content="https://woojiahao.github.io/images/icon.png"/><meta data-react-helmet="true" property="og:description" content="12 April 2021 - Open-source Deep Dive: Broadway (Part 1) - Message queues, concurrency in Elixir, and Broadway architecture - In this installment of Open-source Deep Dive, Broadway takes center stage! In part one, I uncover the mystery of message queues and concurrency in Elixir &amp; demystify the intricate design behind the pipelines that Broadway creates. In part two, I inspect how certain key features of Broadway work like rate limiting and batching! This is the first part of this two-part article! Note that this post is purely for educational purposes, the information gathered from here should only be used in the context of integration testing for websites that are directly under your ownership."/><meta data-react-helmet="true" property="og:title" content="Open-source Deep Dive: Broadway (Part 1) - Message queues, concurrency in Elixir, and Broadway architecture | A Programmer&#x27;s Perspective"/><meta data-react-helmet="true" property="og:url" content="https://woojiahao.github.io/blog/posts/open-source-deep-dive-broadway-part-1"/><meta data-react-helmet="true" property="keywords" content="Open-source Deep Dive, Elixir, Broadway, data processing, message queue, message queues, concurrency, actor concurrency model, producer/consumer model, open-source, open-source project"/><meta data-react-helmet="true" name="image" content="https://woojiahao.github.io/images/icon.png"/><meta data-react-helmet="true" name="description" content="12 April 2021 - Open-source Deep Dive: Broadway (Part 1) - Message queues, concurrency in Elixir, and Broadway architecture - In this installment of Open-source Deep Dive, Broadway takes center stage! In part one, I uncover the mystery of message queues and concurrency in Elixir &amp; demystify the intricate design behind the pipelines that Broadway creates. In part two, I inspect how certain key features of Broadway work like rate limiting and batching! This is the first part of this two-part article! Note that this post is purely for educational purposes, the information gathered from here should only be used in the context of integration testing for websites that are directly under your ownership."/><meta name="generator" content="Gatsby 4.5.2"/><style data-href="/styles.6df0421ca96a939d366f.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}.links a{display:block;font-weight:400}.links a:not(:last-child){margin-bottom:.25rem}@media (max-width:950px){.links a{display:inline-block}.links a:not(:last-child){margin-right:1em}}header nav a:not(:last-child){margin-right:1rem}.page-navigation a,.social-media a{display:block;font-weight:400;margin-bottom:.5rem}.social-media a{align-items:center;display:flex}

/*
! tailwindcss v3.0.15 | MIT License | https://tailwindcss.com
*/*,:after,:before{border:0 solid;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-family:Open Sans,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:Source Code Pro,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-size:100%;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*{margin:0;padding:0}h1,h2,h3,h4,h5,h6{font-family:Open Sans,Avenir,Helvetica,Arial,sans-serif;font-weight:700;line-height:2rem;margin-bottom:2rem;margin-top:2rem;position:relative}h1{font-size:2rem}h2{font-size:1.5rem}h3{font-size:1.17rem}h4{font-size:1rem}h5{font-size:.83rem}h6{font-size:.75rem}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;background-color:var(--bg-color);color:var(--fg-color);font-family:Open Sans,Avenir,Helvetica,Arial,sans-serif;transition-duration:.5s;transition-property:color,background-color,border-color,fill,stroke,-webkit-text-decoration-color;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,-webkit-text-decoration-color;transition-timing-function:cubic-bezier(.4,0,.2,1)}p{line-height:1.75rem;margin-bottom:1.5rem}a{color:var(--link-color);font-weight:700}ol,ul{margin-bottom:2rem;margin-left:5%}ol li:not(:last-child),ul li:not(:last-child){margin-bottom:.5rem}ul{list-style-type:disc}ol{list-style-type:decimal}li a:not(.clean),p a:not(.clean){position:relative}li a:not(.clean):before,p a:not(.clean):before{background-color:var(--link-color);bottom:-.125rem;content:"";height:.125rem;left:0;position:absolute;right:0;transition-duration:.3s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);z-index:-10}li a:not(.clean):hover:before,p a:not(.clean):hover:before{bottom:-.125rem;height:100%;top:0;z-index:-10}li a:not(.clean):hover,p a:not(.clean):hover{color:var(--fg-color);z-index:50}blockquote{--tw-text-opacity:1;border-bottom-color:var(--link-color);border-left:4px var(--link-color);border-right-color:var(--link-color);border-style:solid;border-top-color:var(--link-color);color:rgb(144 164 174/var(--tw-text-opacity));display:block;font-size:1.5rem;margin-bottom:2rem;padding-bottom:.5rem;padding-left:5%;padding-top:.5rem;position:relative}blockquote,blockquote p{line-height:2rem}blockquote p:last-child{margin:0;padding:0}code[class*=language-],pre[class*=language-]{font-family:Source Code Pro,monospace}:not(pre)>code[class*=language-]{--tw-text-opacity:1;background-image:none;color:rgb(144 164 174/var(--tw-text-opacity))}hr{--tw-border-opacity:1;border-color:rgb(144 164 174/var(--tw-border-opacity));border-top:4px rgb(144 164 174/var(--tw-border-opacity));border-style:dotted;margin:2rem auto;text-align:center;width:15%}svg{height:1.5rem;width:1.5rem}img{text-align:center}*,:after,:before{--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.invisible{visibility:hidden}.fixed{position:fixed}.bottom-0{bottom:0}.right-0{right:0}.top-0{top:0}.m-0{margin:0}.m-4{margin:1rem}.my-12{margin-bottom:3rem;margin-top:3rem}.mx-auto{margin-left:auto;margin-right:auto}.my-4{margin-bottom:1rem;margin-top:1rem}.mx-0{margin-left:0;margin-right:0}.mb-4{margin-bottom:1rem}.mb-1{margin-bottom:.25rem}.mt-4{margin-top:1rem}.mb-0{margin-bottom:0}.mr-4{margin-right:1rem}.mb-10{margin-bottom:2.5rem}.mb-2{margin-bottom:.5rem}.mb-5{margin-bottom:1.25rem}.mt-0{margin-top:0}.mt-8{margin-top:2rem}.mb-8{margin-bottom:2rem}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.inline-flex{display:inline-flex}.hidden{display:none}.h-8{height:2rem}.h-full{height:100%}.w-8{width:2rem}.w-24p{width:24%}.w-full{width:100%}.w-72p{width:72%}.min-w-big-button{min-width:150px}.min-w-30p{min-width:30%}.min-w-50p{min-width:50%}.max-w-post-navigation-button{max-width:450px}.max-w-container-max{max-width:1024px}.max-w-layout-max{max-width:900px}.basis-left{flex-basis:1}.basis-right{flex-basis:2}.basis-1{flex-basis:0.25rem}.flex-row{flex-direction:row}.flex-row-reverse{flex-direction:row-reverse}.flex-col{flex-direction:column}.content-center{align-content:center}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.justify-items-center{justify-items:center}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.self-end{align-self:flex-end}.justify-self-end{justify-self:end}.rounded-sm{border-radius:.125rem}.rounded-md{border-radius:.375rem}.rounded-profile{border-radius:10px}.border-2{border-width:2px}.border-l-4{border-left-width:4px}.border-solid{border-style:solid}.border-\[\#e0e0e0\]{--tw-border-opacity:1;border-color:rgb(224 224 224/var(--tw-border-opacity))}.border-link{border-color:var(--link-color)}.bg-pagination-active-background{background-color:var(--pagination-active-background)}.bg-language{background-color:rgba(181,144,202,.4)}.p-3{padding:.75rem}.p-0{padding:0}.py-2{padding-bottom:.5rem;padding-top:.5rem}.px-3{padding-left:.75rem;padding-right:.75rem}.py-1{padding-bottom:.25rem;padding-top:.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.pt-2{padding-top:.5rem}.pr-4{padding-right:1rem}.pb-4{padding-bottom:1rem}.pl-2{padding-left:.5rem}.pl-4{padding-left:1rem}.text-center{text-align:center}.text-right{text-align:right}.text-fixed{font-size:24px}.font-bold{font-weight:700}.font-normal{font-weight:400}.uppercase{text-transform:uppercase}.capitalize{text-transform:capitalize}.text-text{color:var(--fg-color)}.text-gray{--tw-text-opacity:1;color:rgb(144 164 174/var(--tw-text-opacity))}.no-underline{-webkit-text-decoration-line:none;text-decoration-line:none}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}body{--link-color:#ff5964;--bg-color:#fdfffc;--fg-color:#2b2d42;--shadow:#d7d7d7 5px 5px 10px;--pagination-background:#fafafa;--pagination-active-background:#f5f5f5;--blur:5px;--base-unit:16px}body.dark{--link-color:#83bcff;--bg-color:#2b2d42;--fg-color:#fdfffc;--shadow:#000 5px 5px 10px;--pagination-background:#212121;--pagination-active-background:#424242;--blur:0px}.anchor.before{fill:var(--fg-color)}@media (max-width:1024px){body{--base-unit:15px}p{line-height:22px}}@media (max-width:768px){body{--base-unit:14px}p{line-height:20px}blockquote{margin:0 auto 2em;width:90%}}@media (max-width:512px){body{--base-unit:13px}p{line-height:18px}}.last\:mb-0:last-child{margin-bottom:0}.hover\:cursor-pointer:hover{cursor:pointer}.hover\:bg-pagination-background:hover{background-color:var(--pagination-background)}@media (max-width:1024px){.xl\:max-w-container-xl{max-width:950px}.xl\:max-w-layout-xl{max-width:700px}}@media (max-width:950px){.lg\:m-0{margin:0}.lg\:mr-2{margin-right:.5rem}.lg\:mb-8{margin-bottom:2rem}.lg\:inline-block{display:inline-block}.lg\:hidden{display:none}.lg\:h-12{height:3rem}.lg\:h-1\/5{height:20%}.lg\:w-12{width:3rem}.lg\:w-full{width:100%}.lg\:w-1\/5{width:20%}.lg\:max-w-container-lg{max-width:768px}.lg\:flex-col{flex-direction:column}.lg\:text-center{text-align:center}.lg\:last\:mr-4:last-child{margin-right:1rem}}@media (max-width:768px){.md\:invisible{visibility:hidden}.md\:mb-4{margin-bottom:1rem}.md\:mb-5{margin-bottom:1.25rem}.md\:max-w-container-md,.md\:max-w-layout-md{max-width:500px}.md\:flex-col{flex-direction:column}.md\:items-center{align-items:center}.md\:justify-center{justify-content:center}.md\:self-start{align-self:flex-start}.md\:self-end{align-self:flex-end}.md\:self-center{align-self:center}.md\:justify-self-center{justify-self:center}}@media (max-width:512px){.sm\:mb-4{margin-bottom:1rem}.sm\:max-w-container-sm{max-width:400px}.sm\:max-w-layout-sm{max-width:420px}.sm\:flex-col{flex-direction:column}}@media (max-width:420px){.xs\:mb-4{margin-bottom:1rem}.xs\:max-w-container-xs{max-width:300px}.xs\:max-w-layout-xs{max-width:380px}}@media (max-width:380px){.xxs\:max-w-layout-xxs{max-width:300px}}</style><title data-react-helmet="true">Open-source Deep Dive: Broadway (Part 1) - Message queues, concurrency in Elixir, and Broadway architecture | A Programmer&#x27;s Perspective</title><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans" rel="stylesheet"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="icon" href="/favicon-32x32.png?v=fd6bdb13db7426fe1da41411ded1b516" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=fd6bdb13db7426fe1da41411ded1b516"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=fd6bdb13db7426fe1da41411ded1b516"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=fd6bdb13db7426fe1da41411ded1b516"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=fd6bdb13db7426fe1da41411ded1b516"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=fd6bdb13db7426fe1da41411ded1b516"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=fd6bdb13db7426fe1da41411ded1b516"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=fd6bdb13db7426fe1da41411ded1b516"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=fd6bdb13db7426fe1da41411ded1b516"/><link rel="alternate" type="application/rss+xml" title="A Programmer&#x27;s Perspective RSS Feed" href="/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-ff99da1c29b4f1f76ef6.js"/><link as="script" rel="preload" href="/framework-fa6deb564388bfe306c7.js"/><link as="script" rel="preload" href="/app-b7274c71a75fbcb4ae13.js"/><link as="script" rel="preload" href="/d0447323-052e992b1412c04438d9.js"/><link as="script" rel="preload" href="/1bfc9850-3c55a2276a8ee3b853ed.js"/><link as="script" rel="preload" href="/d7eeaac4-28c4cfa7a2167dfaf7f3.js"/><link as="script" rel="preload" href="/0c428ae2-6c4cc4831ec7205b4100.js"/><link as="script" rel="preload" href="/252f366e-b09bf6a53f6dcd93c81f.js"/><link as="script" rel="preload" href="/95b64a6e-c3f5768b8f24036925b9.js"/><link as="script" rel="preload" href="/5e2a4920-da96e73c69d2ab2a114c.js"/><link as="script" rel="preload" href="/e2ecff8ed7fa49d8f80fe7eac6d82969903be618-c67172425d4c0a32988f.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-tsx-017dd4c6ef28ab869296.js"/><link as="fetch" rel="preload" href="/page-data/blog/posts/open-source-deep-dive-broadway-part-1/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2068778362.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2207116114.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div class="my-12 mx-auto max-w-layout-max xl:max-w-layout-xl md:max-w-layout-md sm:max-w-layout-sm xs:max-w-layout-xs xxs:max-w-layout-xxs"><label class="fixed right-0 top-0 m-4"><input type="checkbox" hidden=""/> <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" class="hover:cursor-pointer" height="1.25em" width="1.25em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M14.53 10.53a7 7 0 01-9.058-9.058A7.003 7.003 0 008 15a7.002 7.002 0 006.53-4.47z" clip-rule="evenodd"></path></svg></label><header class="flex items-center justify-items-center justify-between md:flex-col md:items-center md:justify-center"><a href="/"><h3 class="m-0 p-0 text-text">A Programmer&#x27;s Perspective</h3></a><nav class="self-end justify-self-end md:self-center md:justify-self-center"><a href="/blog">Blog</a><a href="/projects">Projects</a><a href="/about">About Me</a><a href="https://www.notion.so/woojiahao/48b21a97d71c4cd2bc9a9051bd7423a3?v=e2c493015ceb47cfa275a03f20895cb1">Recommendations</a></nav></header><div class="flex justify-between items-center"><h1>Open-source Deep Dive: Broadway (Part 1) - Message queues, concurrency in Elixir, and Broadway architecture</h1></div><div class="mb-8"><div><h4 class="mt-0 text-gray">Published on: <!-- -->12 April 2021</h4><div><p>This open-source deep dive has been split into two parts! The first part covers the prerequisite knowledge that would be good to know when trying to understand the inner workings of Broadway. The second part is an in-depth analysis of the implementation of various features of Broadway.</p>
<p>This is the first part of the deep dive and the following topics will be covered:</p>
<ol>
<li>A brief introduction to what Broadway is</li>
<li>Message queues</li>
<li>Concurrency in Elixir</li>
<li>Producer/consumer model &#x26; GenStage</li>
<li>Architecture of a Broadway pipeline</li>
<li>Construction of producer &#x26; processor components</li>
</ol>
<p>If you wish to jump right into the meat of Broadway, you can find the second part <a href="open-source-deep-dive-broadway-part-2">here!</a>.</p>
<h1 id="act-1-scene-1" style="position:relative;"><a href="#act-1-scene-1" aria-label="act 1 scene 1 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><strong>Act 1, Scene 1</strong></h1>
<p><em>You have just received your latest feature to work on and it is to build a system that receives transaction information from a message queue, maps the customer code in this transaction information to the customer's information, and stores this collective information in a separate database to be queried for customer transaction analysis. Your boss has developed an obsession with Elixir recently and is now pushing for every project to use it. Gasp.</em></p>
<p>You start researching for libraries that can do exactly that and stumble upon <a href="https://github.com/dashbitco/broadway">Broadway</a>.</p>
<blockquote>
<p>...build <strong>[concurrent]</strong> and <strong>[multi-stage]</strong> <strong>[data ingestion]</strong> and <strong>[data processing] [pipelines]</strong>...</p>
</blockquote>
<p>Oh boy... that — that is a mouthful... Let's break it down, shall we?</p>
<ol>
<li><strong>concurrent</strong> - having two or more computations in progress at the same time; <em>in progress</em> meaning that they do not have to be executed at the same time (definition <a href="https://www.oreilly.com/library/view/the-art-of/9780596802424/">here</a>)</li>
<li><strong>multi-stage</strong> - successive operating stages (definition <a href="https://www.merriam-webster.com/dictionary/multistage">here</a>)</li>
<li><strong>data ingestion</strong> - process of moving data from one source to a destination for further storage and analysis (definition <a href="https://www.alooma.com/blog/what-is-data-ingestion#:~:text=Data%20ingestion%20is%20a%20process,%2C%20CSVs%2C%20or%20from%20streams.">here</a>)</li>
<li><strong>data processing</strong> - conversion of data into a usable and desirable form (definition <a href="https://planningtank.com/computer-applications/data-processing#:~:text=Data%20processing%20is%20the%20conversion,devices%2C%20and%20thus%20done%20automatically.">here</a>)</li>
<li><strong>pipelines</strong> - series of data processing elements (definition <a href="https://en.wikipedia.org/wiki/Pipeline_(computing)#:~:text=In%20computing%2C%20a%20pipeline%2C%20also,or%20in%20time%2Dsliced%20fashion.">here</a>)</li>
</ol>
<p>In essence, Broadway builds systems that behave like factory assembly lines. Raw materials (data) is fed into the assembly line (Broadway pipeline) which is then pieced together to create the end product or other components used in the final product. The factory has multiple identical assembly lines running so raw material can be fed into any of these lines to be worked on.</p>
<p>For your use case, the flow of data will look something like this:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 534px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/c798266b214ed97c8c5c716636037d4d/07854/pipeline.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 86.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAMCBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB9m3PVKMFaAD/xAAXEAEBAQEAAAAAAAAAAAAAAAARABBC/9oACAEBAAEFAtJJus//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAVEQEBAAAAAAAAAAAAAAAAAAARIP/aAAgBAgEBPwEj/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAExECD/2gAIAQEABj8C4jIxb//EAB0QAAEEAgMAAAAAAAAAAAAAAAEAEBEhMaFxgfD/2gAIAQEAAT8hqbB6KGGNsaVEScBegR0F/wD/2gAMAwEAAgADAAAAELTffP/EABgRAAMBAQAAAAAAAAAAAAAAAAABERBB/9oACAEDAQE/EK+kHn//xAAXEQADAQAAAAAAAAAAAAAAAAABESAx/9oACAECAQE/EEGR/8QAHhAAAQQCAwEAAAAAAAAAAAAAEQABIUEQMVFh0fD/2gAIAQEAAT8QEMu3EIjWGYi5svVE0HIng1jFPodZ/9k='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Sample scenario flowchart"
        title="Sample scenario flowchart"
        src="/static/c798266b214ed97c8c5c716636037d4d/07854/pipeline.jpg"
        srcset="/static/c798266b214ed97c8c5c716636037d4d/863e1/pipeline.jpg 225w,
/static/c798266b214ed97c8c5c716636037d4d/20e5d/pipeline.jpg 450w,
/static/c798266b214ed97c8c5c716636037d4d/07854/pipeline.jpg 534w"
        sizes="(max-width: 534px) 100vw, 534px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>So how does Broadway achieve all of this?</p>
<h1 id="lights-camera-action" style="position:relative;"><a href="#lights-camera-action" aria-label="lights camera action permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Lights! Camera! Action!</h1>
<p>Before understanding the internals of Broadway, we should establish some basic knowledge of the technologies we will be using so that we won't be headless chickens running into this.</p>
<p>Broadway revolve around the following concepts:</p>
<ol>
<li>message queues</li>
<li>concurrency in Elixir</li>
</ol>
<h2 id="what-are-message-queues" style="position:relative;"><a href="#what-are-message-queues" aria-label="what are message queues permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What are message queues?</h2>
<p><strong>Note!</strong> While Broadway can integrate with many types of data sources, the core examples given in the project focus on message queues as the primary data source.</p>
<blockquote>
<p>Message queues are like containers that hold sequences of work objects — called messages — that are to be consumed and processed. It aids with building asynchronous modular and concurrent systems.</p>
</blockquote>
<p>Messages are created and delivered to these queues by <strong>producers</strong> and taken from these queues for processing by <strong>consumers.</strong> These messages can vary from something as simple as plain information to more complex structures like requests or — in our case — transaction information.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 900px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/3f30ae3cfe5655463db99f036a824aad/00d43/message_queue.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2UlEQVQY02WOTU7DMBCFc2zOwQ04AgtuACxA4q9VK1BRgYSoMqST2LWdOJn3UNxVxWxm3jff4hU8GZwk1YkKMvWBwTbEnPXoAPjnz6hQAM/lO9rgoBNQmQ7jOGXbWgv/cI7y8RLrzRYHs0bYLTDEkP+VsfCxR/VrsfwwmRWjTrx6uuX33nAalauvhkNKuUHbWcabM1b3F3z9rBnMgkN9x+BtbrSphe0h8q00vH7ZZlZAVZx1klISkntSOxJuvoe+F9c1Emwj0f6Id60E7wXA7AqpeaehlxiO/A/i2DIbjirtbAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Message queue architecture"
        title="Message queue architecture"
        src="/static/3f30ae3cfe5655463db99f036a824aad/1cfc2/message_queue.png"
        srcset="/static/3f30ae3cfe5655463db99f036a824aad/3684f/message_queue.png 225w,
/static/3f30ae3cfe5655463db99f036a824aad/fc2a6/message_queue.png 450w,
/static/3f30ae3cfe5655463db99f036a824aad/1cfc2/message_queue.png 900w,
/static/3f30ae3cfe5655463db99f036a824aad/00d43/message_queue.png 1000w"
        sizes="(max-width: 900px) 100vw, 900px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>Message queues are useful for <strong>decentralising the communication mechanism of large systems</strong> by acting as a medium for exchanging events between systems which allows for systems to be easily scaled and distributed.</p>
<p>This is a reduced explanation of what a message queue is and what it is capable of. For more information about message queues, the <a href="https://aws.amazon.com/message-queue/">Amazon documentation</a> and this <a href="https://www.cloudamqp.com/blog/what-is-message-queuing.html#:~:text=A%20message%20queue%20is%20a,some%20headers%20at%20the%20top.">blog post</a> by CloudAMQP are good places to start.</p>
<h2 id="concurrency-in-elixir" style="position:relative;"><a href="#concurrency-in-elixir" aria-label="concurrency in elixir permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Concurrency in Elixir</h2>
<p>Broadway relies heavily on concurrency in Elixir. The topology (architecture) of a pipeline is built on top of processes and many of the features are achieved using the robust concurrency model of Elixir. So what exactly is the concurrency model in Elixir?</p>
<p>Elixir employs the <strong>actor concurrency model</strong>. In this model, actors are defined as <strong>self-isolated units of processing</strong>. In Elixir, these actors are called <strong>processes</strong> and they are managed by the <a href="https://en.wikipedia.org/wiki/BEAM_(Erlang_virtual_machine)#:~:text=BEAM%20is%20the%20virtual%20machine,beam%20file%20extension.">Erlang VM</a>. Elixir code is run in each process and a default/main process is akin to that of the <a href="https://cocoacasts.com/swift-and-cocoa-fundamentals-what-is-the-main-thread">main thread</a> in other concurrency models.</p>
<p>Each process communicates via <strong>asynchronous message passing</strong>. Think of a process as a mailbox of sorts; it has a "bin" to receive incoming messages and it possess an "address" for other processes to identify it by.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 900px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/7e9cc787f102cb3697cb66b752264dfd/29114/actor_concurrency_model.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 47.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAACe0lEQVQoz2WRXUhTcRjGn6lpemFuE79CihCh0qYm9nFRaEpFCtJdF61ChEKKgkDTTQW/1nSmZrKdbbpz5trOfx+yzZ05t7nJpiuLDIwQiS6yi8KrkLrsxGEJUj94bt6LH+/7PjhedRYC3aoh8JsAbRqDnRlO4b1N+LEVEAU+/0YkaG9KxP3vOLepbEJ1P91hGc+bNQ5VLXiZukTcvx4OkPPRkAuRoCMFkuISJMmCXKkGy2jKrbSm0jfbLzbQ2vKuCb3Mz9lbV2O+Ha9Tf21mqkfqtD6XUuMdOQvz5qurMW5nadHesBwWhM4UpB/MTANQXFh6SvJwnDlDU/3iZVtvhkLHpil07NEuylECVKOz7Urmyxl1BcuM5rPMKGYNg1haJJA3l6V//PAaP3/t4uv2J6C28XoqgAzVNJGZfJHJfjNXcHeMZCkpUqikSEYn5cSRlheY6rsFM8uIrLSmyEZrckPWAag3eNTViBGLelKwx73WOweEe+fjb0hiY5Ofi77SV8qfHBqxeMVKiqR2aO0YNFohG1hHn96CYYNJ+LHUyTwtwEkePusIOA8DnueTQp7nRd7FIEhopT209n6XhFZuAxANmOakCh2br9Cxh5MhuUqKzemmWAke8xgzGvO001NlHos62+MyFm9/2UpKWwb16LVF8WjSVtSuJY3fdr6jbWQGvQYHlBSBQsfuJVOhY8UKHcnpoWzSHoNDJleZS5eCLlUizvGchz4WDrBA9cV6VF+oR03t5fxzDY2nm2/cFEpCW9+zf4V/Q9BN2QBswO1zCs1eikXcBreDyubcNPYjAXBi/0AQKP8TJlPxwAAX5xGtxDi8XQvD76EhbPgHSGw2cKZ7QLAAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Actor concurrency model visualisation"
        title="Actor concurrency model visualisation"
        src="/static/7e9cc787f102cb3697cb66b752264dfd/1cfc2/actor_concurrency_model.png"
        srcset="/static/7e9cc787f102cb3697cb66b752264dfd/3684f/actor_concurrency_model.png 225w,
/static/7e9cc787f102cb3697cb66b752264dfd/fc2a6/actor_concurrency_model.png 450w,
/static/7e9cc787f102cb3697cb66b752264dfd/1cfc2/actor_concurrency_model.png 900w,
/static/7e9cc787f102cb3697cb66b752264dfd/21482/actor_concurrency_model.png 1350w,
/static/7e9cc787f102cb3697cb66b752264dfd/d61c2/actor_concurrency_model.png 1800w,
/static/7e9cc787f102cb3697cb66b752264dfd/29114/actor_concurrency_model.png 1920w"
        sizes="(max-width: 900px) 100vw, 900px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>The unique aspect of this model is the <strong>lack of shared mutable state</strong> that other concurrency models rely on. Rather, state is exclusive to each process.</p>
<p>In order for the state of a process to be altered, the owner process must make the alteration either on request or internally due to certain changes.</p>
<p>The topic of concurrency in Elixir is vast and Elixir provides many other features surrounding its concurrency model such as <a href="https://elixir-lang.org/getting-started/mix-otp/genserver.html">GenServer</a>. This section is a short preview of what the actor concurrency model and concurrency in Elixir is all about. For more information, you can refer to this <a href="https://berb.github.io/diploma-thesis/original/054_actors.html">thesis paper</a> and the <a href="https://en.wikipedia.org/wiki/Actor_model#:~:text=The%20actor%20model%20in%20computer,universal%20primitive%20of%20concurrent%20computation.&#x26;text=Actors%20may%20modify%20their%20own,for%20lock%2Dbased%20synchronization">Wikipedia article</a> talking about the actor concurrency model and the official <a href="https://elixir-lang.org/getting-started/processes.html">documentation</a> and this <a href="https://serokell.io/blog/elixir-otp-guide">tutorial</a> on OTP in Elixir for more examples of concurrency in Elixir.</p>
<h2 id="cue-the-producerconsumer-model" style="position:relative;"><a href="#cue-the-producerconsumer-model" aria-label="cue the producerconsumer model permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cue the producer/consumer model</h2>
<p>Using the actor concurrency model as a foundation, another concurrency pattern can be modelled in Elixir — the producer/consumer model.</p>
<p>This model aims to allow for decoupled data production and consumption by setting up two separate processes to handle each task — effectively creating a logical separation of concerns.</p>
<p>However, the producer/consumer model faces a critical issue — what happens if the producer generates excessive messages for the consumer? The consumer will be overwhelmed and will eventually fail trying to keep up with processing that many messages. This is where <a href="https://medium.com/@jayphelps/backpressure-explained-the-flow-of-data-through-software-2350b3e77ce7">back pressure</a> comes into play.</p>
<blockquote>
<p>Back pressure is a control mechanism for how much a producer should emit based on consumer demand, consumer message buffering, or limited sampling</p>
</blockquote>
<p>Back pressure avoids the problem of overloading the consumer with messages by applying one of or a combination of the three methods mentioned above (more information in the link <a href="https://medium.com/@jayphelps/backpressure-explained-the-flow-of-data-through-software-2350b3e77ce7">here</a>).</p>
<h2 id="the-next-frontier-of-concurrency-genstage" style="position:relative;"><a href="#the-next-frontier-of-concurrency-genstage" aria-label="the next frontier of concurrency genstage permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The next frontier (of concurrency): GenStage</h2>
<p>Seeing the value of having a standard implementation for the producer/consumer model, the Elixir team decided to develop exactly that.</p>
<blockquote>
<p>GenStage is a specification for exchanging events between producers and consumers with back pressure between Elixir processes</p>
</blockquote>
<p>Producers <strong>emit events</strong> to consumers for <strong>processing</strong>. The events can be of any structure.</p>
<p>The control mechanism used is a demand system. Consumers inform producers of how many events they can handle (demand) and producers emits no more than the demanded amount. This ensures that the consumers are capable of handling the events emitted.</p>
<p>Producer-consumers behave like both producers and consumers. They are used to perform transformations on events emitted by the producer before they are emitted to the consumer.</p>
<p>Similar to <a href="https://hexdocs.pm/elixir/GenServer.html">GenServer</a>, stages in GenStage exchange events through <a href="https://hexdocs.pm/gen_stage/GenStage.html#module-callbacks">callbacks</a>.</p>
<p>When a demand is handled  — i.e. producer emits events and demanding consumer handles these events — another demand is made, creating a cycle where both stages are always working - ideally.</p>
<p>GenStage is a powerful tool in an Elixir developer's arsenal. More information can be found in the <a href="https://elixir-lang.org/blog/2016/07/14/announcing-genstage/">official announcement</a> where a little bit of history of how GenStage came to be was discussed and in a talk by <a href="https://youtu.be/XPlXNUXmcgE">José Valim</a> — creator of Elixir.</p>
<p>With a better grasp of the overarching concepts used in Broadway, we can finally discuss what Broadway is all about and how it does what it does!</p>
<h1 id="pipeline-architecture" style="position:relative;"><a href="#pipeline-architecture" aria-label="pipeline architecture permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pipeline architecture</h1>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 392px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/11afb752c9c478084dc36dcce5c86752/3324e/architecture.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 96%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB7doqagzkQI//xAAaEAABBQEAAAAAAAAAAAAAAAAAAQIQETEh/9oACAEBAAEFAnIJGnFiihuf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFhAAAwAAAAAAAAAAAAAAAAAAECAx/9oACAEBAAY/AjG//8QAHhAAAQMEAwAAAAAAAAAAAAAAAQARkRAhMWFxgaH/2gAIAQEAAT8heuwlMAbFC2XlMS4bkU7SgG5QbSv/2gAMAwEAAgADAAAAENfIf//EABcRAAMBAAAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8Q2o//xAAXEQEBAQEAAAAAAAAAAAAAAAABEBEx/9oACAECAQE/EMCPZ//EAB4QAQACAgEFAAAAAAAAAAAAAAEAETFREEFhcZGx/9oACAEBAAE/EApae6PkYaeDxdpmsXaYzRoOAXn2Ql7HVQDLLaf/2Q=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Pipeline architecture"
        title="Pipeline architecture"
        src="/static/11afb752c9c478084dc36dcce5c86752/3324e/architecture.jpg"
        srcset="/static/11afb752c9c478084dc36dcce5c86752/863e1/architecture.jpg 225w,
/static/11afb752c9c478084dc36dcce5c86752/3324e/architecture.jpg 392w"
        sizes="(max-width: 392px) 100vw, 392px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>It is at this juncture where it would be important to clarify the term "producer". In both message queues and GenStage, a producer is a creator of messages or events. However, in Broadway, a producer is both a consumer of messages and an emitter of events.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 701px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/6f37c757cb3b6e8ea7a570730157f607/5b6f0/terminology.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 12.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAADABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEDBf/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAAB1YJsGH//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAXEAADAQAAAAAAAAAAAAAAAAAAASEx/9oACAEBAAE/IWaqJTD/2gAMAwEAAgADAAAAEPvP/8QAFhEAAwAAAAAAAAAAAAAAAAAAARBB/9oACAEDAQE/EBV//8QAFhEBAQEAAAAAAAAAAAAAAAAAAQBB/9oACAECAQE/EDJb/8QAGxABAAICAwAAAAAAAAAAAAAAAQARITFRcZH/2gAIAQEAAT8QItpmtw5D3CKA8n//2Q=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Terminology clarification for Broadway producer"
        title="Terminology clarification for Broadway producer"
        src="/static/6f37c757cb3b6e8ea7a570730157f607/5b6f0/terminology.jpg"
        srcset="/static/6f37c757cb3b6e8ea7a570730157f607/863e1/terminology.jpg 225w,
/static/6f37c757cb3b6e8ea7a570730157f607/20e5d/terminology.jpg 450w,
/static/6f37c757cb3b6e8ea7a570730157f607/5b6f0/terminology.jpg 701w"
        sizes="(max-width: 701px) 100vw, 701px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>For the rest of the article, the following definitions for the following terminology will be used:</p>
<ol>
<li><strong>producer</strong> — producer of events in Broadway</li>
<li><strong>message</strong> — message in a message queue or any other data source</li>
<li><strong>event</strong> — GenStage events</li>
</ol>
<p>When messages are consumed by the producer, they will be transformed into events with a fixed structure defined by Broadway.</p>
<p>Each component is a separate process and they are dynamically generated as different topologies (architectures) can be designed. The order of initialisation for a typical pipeline looks something like this:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 451px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/69f51d531f24698446d4965ed8ec0b9e/b5072/order_of_initialisation.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 91.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAASABQDASIAAhEBAxEB/8QAGQABAQADAQAAAAAAAAAAAAAAAAMBAgQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQD/2gAMAwEAAhADEAAAAfZrz0KrU0egDIX/xAAZEAACAwEAAAAAAAAAAAAAAAAAARARMkL/2gAIAQEAAQUCWoWqEdx//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAFhAAAwAAAAAAAAAAAAAAAAAAADAx/9oACAEBAAY/Aio//8QAHBABAAIBBQAAAAAAAAAAAAAAAQARQRAhMXHx/9oACAEBAAE/IUeYdElxOTBVxmWCC231/9oADAMBAAIAAwAAABCLz8D/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPxBIT//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/ECE//8QAHxAAAgECBwAAAAAAAAAAAAAAAREAMVEQIUFhcYHR/9oACAEBAAE/EGyCN/bhkl8AIl4cGrekbDezikELqLDJ0eP/2Q=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Order of initialisation"
        title="Order of initialisation"
        src="/static/69f51d531f24698446d4965ed8ec0b9e/b5072/order_of_initialisation.jpg"
        srcset="/static/69f51d531f24698446d4965ed8ec0b9e/863e1/order_of_initialisation.jpg 225w,
/static/69f51d531f24698446d4965ed8ec0b9e/20e5d/order_of_initialisation.jpg 450w,
/static/69f51d531f24698446d4965ed8ec0b9e/b5072/order_of_initialisation.jpg 451w"
        sizes="(max-width: 451px) 100vw, 451px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>The producers and processors are both created using interesting conventions that is will be explored now. Other components will be discussed later on as they tie into other features Broadway has.</p>
<h2 id="how-its-made-producers" style="position:relative;"><a href="#how-its-made-producers" aria-label="how its made producers permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How it's made: Producers</h2>
<p>Producers are built using a pattern similar to the <a href="https://en.wikipedia.org/wiki/Strategy_pattern">strategy pattern</a> but modified to integrate with the concurrency system in Elixir.</p>
<p>Different data sources require different methods of establishing connections and receiving messages. Thus, we break up the producer process into two modules — <code class="language-text">ProducerStage</code> defines the behavior for enforcing the rate limit while a dynamically loaded module defines the behavior for establishing a connection to the data source and receiving messages.</p>
<p><code class="language-text">ProducerStage</code> assumes that the dynamically loaded module contains the typical GenStage callbacks like <code class="language-text">handle_call</code> and <code class="language-text">handle_demand</code> and uses them for things like rate limiting.</p>
<p>The <code class="language-text">ProducerStage</code> behaves as the context while the dynamic module behaves as the strategy. The dynamic module adopts the <code class="language-text">Producer</code> module — which defines two callbacks for managing the overall producer life-cycle.</p>
<p>To load the module dynamically, the module name is passed to <code class="language-text">ProducerStage</code> as an argument. To keep the producer as a single process, we call the <code class="language-text">init</code> function of the module directly when initialising the <code class="language-text">ProducerStage</code>. This way, the module will initialise under the newly spawned process for <code class="language-text">ProducerStage</code> rather than spawning an entirely new process.</p>
<div class="gatsby-highlight" data-language="elixir"><pre style="counter-reset: linenumber NaN" class="language-elixir line-numbers"><code class="language-elixir"><span class="token attribute variable">@impl</span> <span class="token boolean">true</span>
<span class="token keyword">def</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>args<span class="token punctuation">,</span> index<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">do</span>
  <span class="token punctuation">{</span>module<span class="token punctuation">,</span> arg<span class="token punctuation">}</span> <span class="token operator">=</span> args<span class="token punctuation">[</span><span class="token atom symbol">:module</span><span class="token punctuation">]</span>
	<span class="token comment"># ...</span>
  state <span class="token operator">=</span> <span class="token punctuation">%</span><span class="token punctuation">{</span>
    <span class="token attr-name">module:</span> module<span class="token punctuation">,</span>
    <span class="token attr-name">module_state:</span> <span class="token boolean">nil</span><span class="token punctuation">,</span>
    <span class="token attr-name">transformer:</span> transformer<span class="token punctuation">,</span>
    <span class="token attr-name">consumers:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token attr-name">rate_limiting:</span> rate_limiting_state
  <span class="token punctuation">}</span>

	<span class="token comment"># Calling the init function of the dynamically loaded module</span>
  <span class="token keyword">case</span> module<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span> <span class="token keyword">do</span>
		<span class="token comment"># ...</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>When <code class="language-text">start_link</code> is called, a new process is spawned first before the <code class="language-text">init</code> function is called under the new process.</p>
<p>This is done as certain message queue providers like <a href="https://github.com/dashbitco/broadway_rabbitmq">RabbitMQ</a> attach active listeners to the calling process so spawning a separate process for this would mean having to manage two separate processes for a producer.</p>
<h2 id="how-its-made-processors" style="position:relative;"><a href="#how-its-made-processors" aria-label="how its made processors permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How it's made: Processors</h2>
<p>Processors are created using a concept similar to <a href="https://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)">inheritance</a> in object-oriented programming. This idea comes from the need to standardise the subscription logic of producer-consumers and consumers.</p>
<p>When a processor is started using <code class="language-text">start_link</code>, a process of the <code class="language-text">Subscriber</code> module is started with the current processor module passed as a argument.</p>
<div class="gatsby-highlight" data-language="elixir"><pre style="counter-reset: linenumber NaN" class="language-elixir line-numbers"><code class="language-elixir"><span class="token keyword">def</span> <span class="token function">start_link</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> stage_options<span class="token punctuation">)</span> <span class="token keyword">do</span>
  <span class="token module class-name">Broadway</span><span class="token punctuation">.</span><span class="token module class-name">Topology</span><span class="token punctuation">.</span><span class="token module class-name">Subscriber</span><span class="token punctuation">.</span><span class="token function">start_link</span><span class="token punctuation">(</span>
    __MODULE__<span class="token punctuation">,</span>
    args<span class="token punctuation">[</span><span class="token atom symbol">:producers</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    args<span class="token punctuation">,</span>
    <span class="token module class-name">Keyword</span><span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token atom symbol">:processor_config</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token atom symbol">:min_demand</span><span class="token punctuation">,</span> <span class="token atom symbol">:max_demand</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    stage_options
  <span class="token punctuation">)</span>
<span class="token keyword">end</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The current module is initialised in the <code class="language-text">Subscriber</code> process through <code class="language-text">init</code>.</p>
<div class="gatsby-highlight" data-language="elixir"><pre style="counter-reset: linenumber NaN" class="language-elixir line-numbers"><code class="language-elixir"><span class="token attribute variable">@impl</span> <span class="token boolean">true</span>
<span class="token keyword">def</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>module<span class="token punctuation">,</span> names<span class="token punctuation">,</span> options<span class="token punctuation">,</span> subscription_options<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">do</span>
  <span class="token punctuation">{</span>type<span class="token punctuation">,</span> state<span class="token punctuation">,</span> init_options<span class="token punctuation">}</span> <span class="token operator">=</span> module<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
	
	<span class="token comment"># ...</span>
<span class="token keyword">end</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Other producer-consumers and consumers like batcher and batch processors also use this pattern to create their respective GenStage stages.</p>
<p>A separation of concern is achieved using this pattern. The processor is responsible for event handling while the subscriber handles the subscription logic.</p>
<hr>
<p>That's a basic rundown of the concepts underpinning Broadway. While it may not be a complete and intensive explanation of everything, hopefully it is able to provide some clarity. In the next part, we will be exploring how features in Broadway have been implemented!</p>
<p>Hop on over to the second part <a href="open-source-deep-dive-broadway-part-2">here!</a></p>
<hr>
<p>Open-source Deep Dive is a series where I pick apart open-source projects to explain the underlying concepts that power these projects and share my findings about the project!</p></div></div><p><hr/><a href="/rss.xml">Subscribe</a> to the blog&#x27;s RSS feed to get updates of the latest blog posts!</p><div><hr/><div class="flex justify-between md:flex-col"><p class="flex max-w-post-navigation-button rounded-md mb-0md:mb-4 md:self-start"><a class="flex items-center text-text clean" href="/blog/posts/open-source-deep-dive-broadway-part-2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="mr-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"></path></svg>Open-source Deep Dive: Broadway (Part 2) - Inner workings of Broadway</a></p><p class="flex max-w-post-navigation-button rounded-md mb-0md:self-end"><a class="flex items-center text-text clean" href="/blog/posts/the-bookmark-apocalypse">The Bookmark Apocalypse<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="mr-4" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z"></path></svg></a></p></div></div></div><footer><div class="flex justify-between w-full md:flex-col md:mb-5"><div class="basis-left min-w-30p md:mb-5"><p class="m-0 p-0">A Programmer&#x27;s Perspective</p><br/><p class="m-0 p-0">Trekking down the path of programming and discussing my encounters with the unknown!</p><br/><p class="m-0 p-0">Copyright © 2020-2022. Code <a href="https://github.com/woojiahao/woojiahao.github.io">here.</a></p></div><div class="w-full basis-left flex md:mb-5"><div class="page-navigation basis-1 min-w-50p md:mb-5"><p class="font-bold m-0 p-0 mb-4">Navigation</p><a href="/">Home</a><a href="/blog">Blog</a><a href="/projects">Projects</a><a href="/about">About Me</a><a href="https://www.notion.so/woojiahao/48b21a97d71c4cd2bc9a9051bd7423a3?v=e2c493015ceb47cfa275a03f20895cb1">Recommendations</a></div><div class="basis-1 min-w-50p md:mb-5"><p class="social-media font-bold m-0 p-0 mb-4">Connect with me!</p><a target="_blank" href="https://github.com/woojiahao" class="flex items-end font-normal mb-1 last:mb-0 lg:inline-block lg:last:mr-4 gap-2 flex-row"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" class="lg:w-12 lg:h-12 lg:m-0 lg:mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg><span class="lg:hidden">woojiahao</span></a><a target="_blank" href="https://discord.gg/sgexams" class="flex items-end font-normal mb-1 last:mb-0 lg:inline-block lg:last:mr-4 gap-2 flex-row"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" class="lg:w-12 lg:h-12 lg:m-0 lg:mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M20.222 0c1.406 0 2.54 1.137 2.607 2.475V24l-2.677-2.273-1.47-1.338-1.604-1.398.67 2.205H3.71c-1.402 0-2.54-1.065-2.54-2.476V2.48C1.17 1.142 2.31.003 3.715.003h16.5L20.222 0zm-6.118 5.683h-.03l-.202.2c2.073.6 3.076 1.537 3.076 1.537-1.336-.668-2.54-1.002-3.744-1.137-.87-.135-1.74-.064-2.475 0h-.2c-.47 0-1.47.2-2.81.735-.467.203-.735.336-.735.336s1.002-1.002 3.21-1.537l-.135-.135s-1.672-.064-3.477 1.27c0 0-1.805 3.144-1.805 7.02 0 0 1 1.74 3.743 1.806 0 0 .4-.533.805-1.002-1.54-.468-2.14-1.404-2.14-1.404s.134.066.335.2h.06c.03 0 .044.015.06.03v.006c.016.016.03.03.06.03.33.136.66.27.93.4.466.202 1.065.403 1.8.536.93.135 1.996.2 3.21 0 .6-.135 1.2-.267 1.8-.535.39-.2.87-.4 1.397-.737 0 0-.6.936-2.205 1.404.33.466.795 1 .795 1 2.744-.06 3.81-1.8 3.87-1.726 0-3.87-1.815-7.02-1.815-7.02-1.635-1.214-3.165-1.26-3.435-1.26l.056-.02zm.168 4.413c.703 0 1.27.6 1.27 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334.002-.74.573-1.338 1.27-1.338zm-4.543 0c.7 0 1.266.6 1.266 1.335 0 .74-.57 1.34-1.27 1.34-.7 0-1.27-.6-1.27-1.334 0-.74.57-1.338 1.27-1.338z"></path></svg><span class="lg:hidden">@Chill#4048</span></a><a target="_blank" href="https://www.linkedin.com/in/jia-hao-woo-089346155/" class="flex items-end font-normal mb-1 last:mb-0 lg:inline-block lg:last:mr-4 gap-2 flex-row"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" class="lg:w-12 lg:h-12 lg:m-0 lg:mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM349.3 793.7H230.6V411.9h118.7v381.8zm-59.3-434a68.8 68.8 0 1 1 68.8-68.8c-.1 38-30.9 68.8-68.8 68.8zm503.7 434H675.1V608c0-44.3-.8-101.2-61.7-101.2-61.7 0-71.2 48.2-71.2 98v188.9H423.7V411.9h113.8v52.2h1.6c15.8-30 54.5-61.7 112.3-61.7 120.2 0 142.3 79.1 142.3 181.9v209.4z"></path></svg><span class="lg:hidden">Woo Jia Hao</span></a><a target="_blank" href="https://twitter.com/woojiahao_" class="flex items-end font-normal mb-1 last:mb-0 lg:inline-block lg:last:mr-4 gap-2 flex-row"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" class="lg:w-12 lg:h-12 lg:m-0 lg:mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM727.3 401.7c.3 4.7.3 9.6.3 14.4 0 146.8-111.8 315.9-316.1 315.9-63 0-121.4-18.3-170.6-49.8 9 1 17.6 1.4 26.8 1.4 52 0 99.8-17.6 137.9-47.4-48.8-1-89.8-33-103.8-77 17.1 2.5 32.5 2.5 50.1-2a111 111 0 0 1-88.9-109v-1.4c14.7 8.3 32 13.4 50.1 14.1a111.13 111.13 0 0 1-49.5-92.4c0-20.7 5.4-39.6 15.1-56a315.28 315.28 0 0 0 229 116.1C492 353.1 548.4 292 616.2 292c32 0 60.8 13.4 81.1 35 25.1-4.7 49.1-14.1 70.5-26.7-8.3 25.7-25.7 47.4-48.8 61.1 22.4-2.4 44-8.6 64-17.3-15.1 22.2-34 41.9-55.7 57.6z"></path></svg><span class="lg:hidden">@woojiahao_</span></a><a target="_blank" href="mailto: me@woojiahao.com" class="flex items-end font-normal mb-1 last:mb-0 lg:inline-block lg:last:mr-4 gap-2 flex-row"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="lg:w-12 lg:h-12 lg:m-0 lg:mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path></svg><span class="lg:hidden">me@woojiahao.com</span></a><a target="_blank" href="/rss.xml" class="flex items-end font-normal mb-1 last:mb-0 lg:inline-block lg:last:mr-4 gap-2 flex-row"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="lg:w-12 lg:h-12 lg:m-0 lg:mr-2" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM112 416c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm157.533 0h-34.335c-6.011 0-11.051-4.636-11.442-10.634-5.214-80.05-69.243-143.92-149.123-149.123-5.997-.39-10.633-5.431-10.633-11.441v-34.335c0-6.535 5.468-11.777 11.994-11.425 110.546 5.974 198.997 94.536 204.964 204.964.352 6.526-4.89 11.994-11.425 11.994zm103.027 0h-34.334c-6.161 0-11.175-4.882-11.427-11.038-5.598-136.535-115.204-246.161-251.76-251.76C68.882 152.949 64 147.935 64 141.774V107.44c0-6.454 5.338-11.664 11.787-11.432 167.83 6.025 302.21 141.191 308.205 308.205.232 6.449-4.978 11.787-11.432 11.787z"></path></svg><span class="lg:hidden">Blog RSS Feed</span></a></div></div></div></footer></div><div class="invisible arrow fixed bottom-0 right-0 inline-flex rounded-sm pt-2 pr-4 pb-4 pl-2 hover:cursor-pointer md:invisible"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="1.75em" width="1.75em" xmlns="http://www.w3.org/2000/svg"><path d="M868 545.5L536.1 163a31.96 31.96 0 0 0-48.3 0L156 545.5a7.97 7.97 0 0 0 6 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"></path></svg></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-164563111-1"></script><script>
      
      function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-164563111-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-164563111-1', {"anonymize_ip":true,"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/posts/open-source-deep-dive-broadway-part-1";window.___webpackCompilationHash="018c3104635312e44ede";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-1a26de506fa5b07d834d.js"],"app":["/app-b7274c71a75fbcb4ae13.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-ce77e6468c21c8915f7f.js"],"component---src-pages-404-js":["/component---src-pages-404-js-2d9b5fef061db4f8e856.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-402ea53f6e1359d4c67e.js"],"component---src-pages-projects-tsx":["/component---src-pages-projects-tsx-062f85a512b1c9431cae.js"],"component---src-templates-blog-list-tsx":["/component---src-templates-blog-list-tsx-8536c91af526652f974e.js"],"component---src-templates-blog-post-tsx":["/component---src-templates-blog-post-tsx-017dd4c6ef28ab869296.js"],"component---src-templates-general-post-tsx":["/component---src-templates-general-post-tsx-04a157f3952545e99e14.js"]};/*]]>*/</script><script src="/polyfill-1a26de506fa5b07d834d.js" nomodule=""></script><script src="/component---src-templates-blog-post-tsx-017dd4c6ef28ab869296.js" async=""></script><script src="/e2ecff8ed7fa49d8f80fe7eac6d82969903be618-c67172425d4c0a32988f.js" async=""></script><script src="/5e2a4920-da96e73c69d2ab2a114c.js" async=""></script><script src="/95b64a6e-c3f5768b8f24036925b9.js" async=""></script><script src="/252f366e-b09bf6a53f6dcd93c81f.js" async=""></script><script src="/0c428ae2-6c4cc4831ec7205b4100.js" async=""></script><script src="/d7eeaac4-28c4cfa7a2167dfaf7f3.js" async=""></script><script src="/1bfc9850-3c55a2276a8ee3b853ed.js" async=""></script><script src="/d0447323-052e992b1412c04438d9.js" async=""></script><script src="/app-b7274c71a75fbcb4ae13.js" async=""></script><script src="/framework-fa6deb564388bfe306c7.js" async=""></script><script src="/webpack-runtime-ff99da1c29b4f1f76ef6.js" async=""></script></body></html>