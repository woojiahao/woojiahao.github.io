<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.5625 'Source Sans Pro',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Source Sans Pro',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Source Serif Pro',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Source Serif Pro',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Source Serif Pro',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Source Serif Pro',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Source Serif Pro',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;color:hsla(0,0%,0%,1);font-family:'Source Serif Pro',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}ul{margin-left:1.5625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.5625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;font-size:0.85rem;line-height:1.5625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;font-size:1rem;line-height:1.5625rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}blockquote{margin-left:0;margin-right:1.5625rem;margin-top:0;padding-bottom:0;padding-left:1.75781rem;padding-right:0;padding-top:0;margin-bottom:1.5625rem;font-size:1.1487rem;line-height:1.5625rem;color:hsla(0,0%,0%,0.59);border-left:0.58594rem solid;border-color:#fcea0e;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.5625rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.5625rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.5625rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.5625rem;margin-bottom:calc(1.5625rem / 2);margin-top:calc(1.5625rem / 2);}li > ul{margin-left:1.5625rem;margin-bottom:calc(1.5625rem / 2);margin-top:calc(1.5625rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.5625rem / 2);}code{font-size:0.85rem;line-height:1.5625rem;}kbd{font-size:0.85rem;line-height:1.5625rem;}samp{font-size:0.85rem;line-height:1.5625rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.04167rem;padding-right:1.04167rem;padding-top:0.78125rem;padding-bottom:calc(0.78125rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:#fb251b;text-decoration:none;}a:hover,a:active{color:hsla(0,0%,0%,0.8);}h1,h2,h3,h4,h5,h6{margin-top:3.125rem;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.5625rem;color:hsla(0,0%,0%,0.8);font-weight:400;}blockquote cite:before{content:"â€” ";}@media only screen and (max-width:480px){blockquote{margin-left:-1.17188rem;margin-right:0;border-left:0.29297rem solid;border-color:#fcea0e;padding-left:0.87891rem;}}</style><style data-href="/styles.76ff22d8ad42c6b645d1.css">code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}code[class*=language-],pre[class*=language-]{font-family:IBM Plex Mono,monospace;font-size:.8rem}#___gatsby,body{overflow-y:hidden}html{overflow-y:auto}.layout-module--layout--WT_lX{margin:3rem auto;max-width:900px}header{display:flex;align-items:center;justify-items:center;justify-content:space-between}header h3{margin:0}header nav{align-self:end;justify-self:end}header nav a:not(:last-child){margin-right:15px}.layout-module--title--2pFnw,.project-list-module--project-title--3yIse{display:flex;justify-content:space-between;align-items:center}.project-list-module--project-title--3yIse{margin-bottom:15px}.project-list-module--project-title--3yIse h2{margin:0}.project-list-module--language--1bZRd,.project-list-module--status--3zrNb{border-radius:3px;padding:5px}.project-list-module--language--1bZRd{background-color:rgba(181,144,202,.4)}span.project-list-module--language--1bZRd{margin-right:15px}.project-list-module--description--1c2ws{margin-bottom:15px}.project-listing-module--content--38tNg h2,.project-listing-module--content--38tNg h3{margin-top:0}.image-carousel-module--carousel-container--1tyxZ{position:relative;box-shadow:5px 5px 8px #eee;margin-bottom:30px}.image-carousel-module--carousel--2Xg0b{position:relative}.image-carousel-module--background-image--1RgHi{position:absolute;max-height:500px;top:0;width:100%;overflow:hidden;-webkit-filter:blur(5px);filter:blur(5px)}.image-carousel-module--foreground-image--157Xf{display:flex;justify-content:center}.image-carousel-module--navigation--1gega{position:absolute;width:100%;display:flex;justify-content:space-between;top:50%}.image-carousel-module--navigation--1gega div:hover{cursor:pointer}.image-carousel-module--navigation--1gega div:first-child{margin-left:15px}.image-carousel-module--navigation--1gega div:last-child{margin-right:15px}.blog-list-module--general-title--3jaRk{display:flex;justify-content:space-between;align-items:center}.blog-list-module--blog-title--I4gd8{margin:0 0 15px}.blog-list-module--subtitle--1zpXO{display:flex;justify-content:space-between}.blog-list-module--subtitle--1zpXO h3{margin-top:0;margin-bottom:15px;color:grey}.post-pagination-module--paginator--2b3dP{margin-top:15px;display:flex;justify-content:center}.post-pagination-module--active-page--2-V9m{color:#000;font-weight:700}.post-pagination-module--page-number--1ub6L{padding:5px}.blog-post-module--subtitle--2sM_R{margin-top:0;color:grey}.post-navigation-module--navigation--3VtCO .post-navigation-module--buttons--CZBoe{display:flex;justify-content:space-between}.post-navigation-module--navigation--3VtCO .post-navigation-module--buttons--CZBoe p{display:flex;max-width:450px;padding:8px 15px;background-color:hsla(0,0%,82.7%,.7);border-radius:5px;margin-bottom:0}.post-navigation-module--navigation--3VtCO .post-navigation-module--buttons--CZBoe p a{display:flex;align-items:center;color:#000}.index-module--home-container--3gShE{height:100vh;margin:0 auto;max-width:700px;display:flex;align-items:center;justify-items:center}.index-module--main-container--2f8vf{margin-right:30px}.index-module--contact--1t6Ht,.index-module--links--3i00D{display:flex}.index-module--contact--1t6Ht a:not(:last-child),.index-module--links--3i00D a:not(:last-child),strong{margin-right:15px}</style><meta name="generator" content="Gatsby 2.20.14"/><link href="//fonts.googleapis.com/css?family=Source+Serif+Pro:600|Source+Sans+Pro:400,400i,700" rel="stylesheet" type="text/css"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/google-fonts/s/ibmplexmono/v5/-F63fjptAgt5VM-kVkqdyU8n1i8q1w.woff2"/><style type="text/css">@font-face{font-family:'IBM Plex Mono';font-style:normal;font-weight:400;src:local('IBM Plex Mono'),local('IBMPlexMono'),url(/google-fonts/s/ibmplexmono/v5/-F63fjptAgt5VM-kVkqdyU8n1i8q1w.woff2) format('woff2'),url(/google-fonts/s/ibmplexmono/v5/-F63fjptAgt5VM-kVkqdyU8n1i8q0Q.woff) format('woff');font-display: swap;}</style><link as="script" rel="preload" href="/webpack-runtime-133ec1ca78db31431cad.js"/><link as="script" rel="preload" href="/framework-3321703c33570853116c.js"/><link as="script" rel="preload" href="/app-5b3b56680bcec163e8c5.js"/><link as="script" rel="preload" href="/styles-0dd9b16d06f2e4f550cc.js"/><link as="script" rel="preload" href="/1bfc9850-67abfbc3305acb114ae2.js"/><link as="script" rel="preload" href="/a7d83a3326cab2242e62c53d592ff895c39e8ba9-3e5d3b219bf8cea167d3.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-f04ca8b982c05b68a1b7.js"/><link as="fetch" rel="preload" href="/page-data/blog/posts/2018-12-16-Writing-a-wrapper/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout-module--layout--WT_lX"><header><a href="/"><h3>A Programmer&#x27;s Perspective</h3></a><nav><a href="/blog">Blog</a><a href="/projects">Projects</a><a href="/about">About Me</a><a href="/recommendations">Recommendations</a></nav></header><div class="layout-module--title--2pFnw"><h1>Writing a wrapper</h1></div><div style="margin-bottom:1.5625rem"><div><h4 class="blog-post-module--subtitle--2sM_R">Published on: <!-- -->16 December 2018</h4><div><p>During my first semester of my second year in Polytechnic, I began writing a simple wrapper for the <a href="https://developer.spotify.com/documentation/web-api/quick-start/">Spotify Web API</a> as I was interesting in the process of developing a
library for other developers to use and this was something that I saw as an opportunity. </p>
<h3>Different thinking process</h3>
<p>It was incredibly refreshing to write a something with developers in mind, rather than focussing on clients who might
not know anything about programming. It introduced a completely different set of thinking as I had to think about how
other developers would like to use the library I write, and whether the API I present to them is intuitive.</p>
<p>For instance, when thinking about introducing asynchronous calls to my library, I decided to make use of callbacks.</p>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processArtist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  user<span class="token punctuation">.</span><span class="token function">getSingleArtist</span><span class="token punctuation">(</span><span class="token string">"0OdUWJ0sBjDrqHygGUXeCF"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">executeAsync</span><span class="token punctuation">(</span>artist <span class="token operator">-></span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Got Artist"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>artist<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>This was something that I personally would have enjoyed using and thus I decided to stick with this design.</p>
<h4>Builder pattern</h4>
<p>The library is built on top of the <a href="https://dzone.com/articles/design-patterns-the-builder-pattern">Builder pattern</a>.
This was a design choice because even if the library was written in Kotlin, it was aimed at Java developers and certain
language constructs (like optional arguments and named arguments) were simply not available to Java, so I decided to
optimize the library to work with Java code and to reduce redundant repetitions of nulls for parameters that are not
needed.</p>
<h3>Leveraging generics</h3>
<h4>Mistakes were made...</h4>
<p>I also learnt to properly utilize generics when creating a parent class so as to reduce the overhead needed when creating
sub-classes. Prior to this "discovery" I had designed the parent class as such:</p>
<div class="gatsby-highlight" data-language="kotlin"><pre style="counter-reset: linenumber NaN" class="language-kotlin line-numbers"><code class="language-kotlin"><span class="token keyword">abstract</span> <span class="token keyword">class</span> AbstractQuery <span class="token punctuation">{</span>
  <span class="token keyword">abstract</span> <span class="token keyword">fun</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Any

  <span class="token keyword">fun</span> <span class="token function">executeAsync</span><span class="token punctuation">(</span>callback<span class="token operator">:</span> <span class="token punctuation">(</span>Any<span class="token punctuation">)</span> <span class="token operator">-></span> Unit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    thread <span class="token punctuation">{</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> </code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>This made it so any child class would implement the parent class in the following way:</p>
<div class="gatsby-highlight" data-language="kotlin"><pre style="counter-reset: linenumber NaN" class="language-kotlin line-numbers"><code class="language-kotlin"><span class="token keyword">class</span> GetArtistQuery <span class="token operator">:</span> <span class="token function">AbstractQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Artist <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>Whilst this allowed me to return anything, it also meant that the code was not type safe, so if a developer were to use
the <code class="language-text">executeAsync()</code> method, he/she would have to be aware of the type of that the <code class="language-text">execute()</code> method returns to be able
to cast the input of the callback, which could cause problems if I (as the designer of the library) failed to properly
specify the specific return type of the <code class="language-text">execute()</code> method, resulting in an overall poor experience using the library.</p>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processArtist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  user<span class="token punctuation">.</span><span class="token function">getSingleArtist</span><span class="token punctuation">(</span><span class="token string">"0OdUWJ0sBjDrqHygGUXeCF"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">executeAsync</span><span class="token punctuation">(</span>artist <span class="token operator">-></span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Got Artist"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Artist</span><span class="token punctuation">)</span> artist<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h4>Lessons were learnt...</h4>
<p>With generics, I managed to have a type safe way of writing each child query, preventing developers working on the
library code and developers using the library from making stupid mistakes.</p>
<div class="gatsby-highlight" data-language="kotlin"><pre style="counter-reset: linenumber NaN" class="language-kotlin line-numbers"><code class="language-kotlin"><span class="token keyword">abstract</span> <span class="token keyword">class</span> AbstractQuery<span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">abstract</span> <span class="token keyword">fun</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> T

  <span class="token keyword">fun</span> <span class="token function">executeAsync</span><span class="token punctuation">(</span>callback<span class="token operator">:</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-></span> Unit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    thread <span class="token punctuation">{</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> GetArtistQuery <span class="token operator">:</span> AbstractQuery<span class="token operator">&lt;</span>Artist<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Artist <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">processArtist</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  user<span class="token punctuation">.</span><span class="token function">getSingleArtist</span><span class="token punctuation">(</span><span class="token string">"0OdUWJ0sBjDrqHygGUXeCF"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">executeAsync</span><span class="token punctuation">(</span>artist <span class="token operator">-></span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Got Artist"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// artist is already going to be of type: Artist</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>artist<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h3>Using varargs</h3>
<p>When designing the endpoint system, I realized that it would be tedious to store the endpoints in the parent class and
memorizing which ones to call for each query. Using <code class="language-text">varargs</code> to construct each endpoint also allowed me to reference
the endpoint without having to memorize some unique name that was given in a parent class, effectively reducing the
overhead needed.</p>
<div class="gatsby-highlight" data-language="kotlin"><pre style="counter-reset: linenumber NaN" class="language-kotlin line-numbers"><code class="language-kotlin"><span class="token keyword">abstract</span> <span class="token keyword">class</span> AbstractQuery<span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">vararg</span> pathSegments<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token keyword">class</span> GetArtistQuery <span class="token keyword">private</span> <span class="token keyword">constructor</span><span class="token punctuation">(</span>
  <span class="token keyword">private</span> <span class="token keyword">val</span> accessToken<span class="token operator">:</span> String
  <span class="token punctuation">,</span> <span class="token keyword">private</span> <span class="token keyword">val</span> artistId<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token operator">:</span> AbstractQuery<span class="token operator">&lt;</span>Artist<span class="token operator">></span><span class="token punctuation">(</span><span class="token string">"artists"</span><span class="token punctuation">,</span> artistId<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h3>APIs</h3>
<h4>HTTP requests</h4>
<p>I had also learnt a great deal about HTTP requests, namely the different types of requests and how different headers
would influence the results of the request. Prior to the making of the wrapper, I had a basic understanding of HTTP,
simply understanding that if I wanted to make a call to the API, I would need to specify the request to an endpoint of
the API with a HTTP request type.</p>
<h4>OAuth process</h4>
<p>I also learnt a lot about OAuth as that was the method of authentication the API used to authenticate users. I learnt
about the various components of OAuth and the benefits to using it.</p>
<p><a href="https://oauth.net/articles/authentication/">Reading material I used.</a></p>
<h3>Building custom tools</h3>
<p>In the process of writing the wrapper, the benefits of writing custom tools to assist the development process became
prevalent. I noticed that I would often have to manually manage the API token and that would become tedious since it
resets every hour and having to manually manage it meant that I would have to run a separate instance of the library
that handles this. </p>
<p>So I decided to spend a day to design the <a href="https://github.com/woojiahao/spotify-access-token-generator">Access Token Generator</a>
tool to help me generate and manage the access token, as well as facilitate the authentication process for the user,
greatly improving my development speed.</p>
<h3>Conclusion</h3>
<p>I learnt to better utilize language features that Kotlin had to offer, think about the design of the library so that
it is easiest to use by the target developers. I also brushed up on my understanding of web services and how APIs
operated. I also built custom tools to improve my life as a developer. All in all, it was an incredibly fruitful
experience.</p>
<ul>
<li><a href="https://github.com/woojiahao/java-spotify-wrapper">Library (in beta)</a></li>
<li><a href="https://github.com/woojiahao/spotify-access-token-generator">Access token generator</a></li>
</ul></div></div><div class="post-navigation-module--navigation--3VtCO"><hr/><div class="post-navigation-module--buttons--CZBoe"><p><a href="/blog/posts/2019-02-24-Introducing-Omnius"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" style="margin-right:15px" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 504C119 504 8 393 8 256S119 8 256 8s248 111 248 248-111 248-248 248zm116-292H256v-70.9c0-10.7-13-16.1-20.5-8.5L121.2 247.5c-4.7 4.7-4.7 12.2 0 16.9l114.3 114.9c7.6 7.6 20.5 2.2 20.5-8.5V300h116c6.6 0 12-5.4 12-12v-64c0-6.6-5.4-12-12-12z"></path></svg>Introducing Omnius</a></p><p><a href="/blog/posts/2018-11-26-Java-Generics">An investigation into generics in Java<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" style="margin-left:15px" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 8c137 0 248 111 248 248S393 504 256 504 8 393 8 256 119 8 256 8zM140 300h116v70.9c0 10.7 13 16.1 20.5 8.5l114.3-114.9c4.7-4.7 4.7-12.2 0-16.9l-114.3-115c-7.6-7.6-20.5-2.2-20.5 8.5V212H140c-6.6 0-12 5.4-12 12v64c0 6.6 5.4 12 12 12z"></path></svg></a></p></div></div></div><footer>Copyright Â© 2020. A Programmer&#x27;s Perspective is built with Gatsby.js. The repository can be found <a href="https://github.com/woojiahao/woojiahao.github.io.development">here.</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/posts/2018-12-16-Writing-a-wrapper";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-5b3b56680bcec163e8c5.js"],"component---src-templates-project-list-js":["/component---src-templates-project-list-js-fe70231abf93610ebcbe.js"],"component---src-templates-project-listing-js":["/component---src-templates-project-listing-js-f4de02d56947d08224a6.js"],"component---src-templates-blog-list-js":["/component---src-templates-blog-list-js-47167e444bedd0afeb42.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-f04ca8b982c05b68a1b7.js"],"component---src-pages-about-js":["/component---src-pages-about-js-fa7e8a607b8d6b8a585a.js"],"component---src-pages-index-js":["/component---src-pages-index-js-b6a94a170c86ea469424.js"],"component---src-pages-recommendations-js":["/component---src-pages-recommendations-js-1f91883323201ea57f68.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-f04ca8b982c05b68a1b7.js" async=""></script><script src="/a7d83a3326cab2242e62c53d592ff895c39e8ba9-3e5d3b219bf8cea167d3.js" async=""></script><script src="/1bfc9850-67abfbc3305acb114ae2.js" async=""></script><script src="/styles-0dd9b16d06f2e4f550cc.js" async=""></script><script src="/app-5b3b56680bcec163e8c5.js" async=""></script><script src="/framework-3321703c33570853116c.js" async=""></script><script src="/webpack-runtime-133ec1ca78db31431cad.js" async=""></script></body></html>